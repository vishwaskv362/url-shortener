<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - URL Shortener</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #0a0e27; min-height: 100vh; padding: 20px; color: #e0e0e0; position: relative; overflow-x: hidden; }
        body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 20% 30%, rgba(88, 86, 214, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(138, 43, 226, 0.15) 0%, transparent 50%), radial-gradient(circle at 50% 50%, rgba(64, 224, 208, 0.1) 0%, transparent 50%); animation: backgroundShift 20s ease infinite; z-index: 0; }
        @keyframes backgroundShift { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.8; transform: scale(1.1); } }
        .navbar { background: rgba(20, 25, 47, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 20px 30px; margin-bottom: 40px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); display: flex; justify-content: space-between; align-items: center; animation: slideDown 0.6s ease-out; position: relative; z-index: 1; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .navbar h1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 1.8em; margin: 0; font-weight: 800; letter-spacing: -0.5px; }
        .nav-links { display: flex; gap: 10px; }
        .nav-links a { color: #e0e0e0; text-decoration: none; font-weight: 500; padding: 10px 20px; border-radius: 12px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; }
        .nav-links a::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); transition: left 0.3s ease; z-index: -1; }
        .nav-links a:hover::before { left: 0; }
        .nav-links a:hover { color: white; transform: translateY(-2px); }
        .container { max-width: 1400px; margin: 0 auto; position: relative; z-index: 1; }
        .dashboard-header { background: rgba(20, 25, 47, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 35px; margin-bottom: 35px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); animation: fadeInUp 0.8s ease-out 0.1s both; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .dashboard-header h2 { color: #e0e0e0; margin-bottom: 25px; font-size: 2em; font-weight: 700; }
        .stats-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; text-align: center; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .stat-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4); }
        .stat-card .number { font-size: 2.8em; font-weight: 800; margin-bottom: 8px; }
        .stat-card .label { font-size: 0.95em; opacity: 0.95; font-weight: 500; }
        .urls-grid { display: grid; gap: 20px; }
        .url-card { background: rgba(20, 25, 47, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 28px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); animation: fadeInUp 0.6s ease-out both; }
        .url-card:hover { transform: translateY(-8px); box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3); border-color: rgba(102, 126, 234, 0.3); }
        .url-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px; }
        .url-code { font-size: 1.3em; font-weight: 700; background: linear-gradient(135deg, #667eea 0%, #f093fb 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-family: 'Courier New', monospace; }
        .badge { display: inline-block; padding: 6px 14px; border-radius: 20px; font-size: 0.8em; font-weight: 600; }
        .badge.custom { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .badge.auto { background: rgba(100, 200, 255, 0.2); color: #64c8ff; border: 1px solid rgba(100, 200, 255, 0.3); }
        .url-original { color: #a0a0a0; font-size: 0.95em; margin-bottom: 18px; word-break: break-all; line-height: 1.6; }
        .url-meta { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 18px; font-size: 0.9em; color: #888; }
        .url-meta span { display: flex; align-items: center; gap: 6px; }
        .url-actions { display: flex; gap: 12px; flex-wrap: wrap; }
        .btn { padding: 11px 22px; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-block; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-size: 0.9em; font-family: inherit; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4); }
        .btn-secondary { background: rgba(255, 255, 255, 0.05); color: #e0e0e0; border: 1px solid rgba(255, 255, 255, 0.1); }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.1); transform: translateY(-2px); }
        .btn-danger { background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%); color: white; }
        .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4); }
        .pagination { display: flex; justify-content: center; gap: 12px; margin-top: 35px; padding: 20px; flex-wrap: wrap; }
        .pagination a, .pagination span { padding: 12px 18px; background: rgba(20, 25, 47, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; text-decoration: none; color: #e0e0e0; font-weight: 600; transition: all 0.3s ease; }
        .pagination span.current { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-color: transparent; }
        .pagination a:hover { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); }
        .empty-state { background: rgba(20, 25, 47, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 80px 40px; text-align: center; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); animation: fadeInUp 0.8s ease-out; }
        .empty-state-icon { font-size: 100px; margin-bottom: 25px; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .empty-state h3 { color: #e0e0e0; margin-bottom: 15px; font-size: 1.8em; font-weight: 700; }
        .empty-state p { color: #a0a0a0; margin-bottom: 30px; font-size: 1.1em; }
        @media (max-width: 768px) { .navbar { flex-direction: column; gap: 15px; padding: 20px; } .navbar h1 { font-size: 1.5em; } .dashboard-header { padding: 25px; } .url-header { flex-direction: column; gap: 12px; } .url-actions { width: 100%; } .btn { flex: 1; text-align: center; } .stats-summary { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="navbar">
            <h1><i class="fas fa-link"></i> URL Shortener</h1>
            <div class="nav-links">
                <a href="/"><i class="fas fa-home"></i> Home</a>
                <a href="/dashboard"><i class="fas fa-chart-line"></i> Dashboard</a>
            </div>
        </div>
        <div class="dashboard-header">
            <h2><i class="fas fa-chart-bar"></i> Dashboard</h2>
            <div class="stats-summary">
                <div class="stat-card"><div class="number">{{ data.total }}</div><div class="label"><i class="fas fa-link"></i> Total URLs</div></div>
                <div class="stat-card"><div class="number">{{ data.current_page }}</div><div class="label"><i class="fas fa-file"></i> Current Page</div></div>
                <div class="stat-card"><div class="number">{{ data.pages }}</div><div class="label"><i class="fas fa-files"></i> Total Pages</div></div>
            </div>
        </div>
        {% if data.urls %}
        <div class="urls-grid">
            {% for url in data.urls %}
            <div class="url-card">
                <div class="url-header">
                    <div>
                        <span class="url-code">{{ url.short_code }}</span>
                        {% if url.custom %}<span class="badge custom"><i class="fas fa-star"></i> Custom</span>{% else %}<span class="badge auto"><i class="fas fa-magic"></i> Auto</span>{% endif %}
                    </div>
                </div>
                <div class="url-original"><strong><i class="fas fa-globe"></i> Original:</strong> {{ url.original_url }}</div>
                <div class="url-meta">
                    <span><i class="far fa-calendar"></i> {{ url.created_at[:10] }}</span>
                    <span><i class="fas fa-mouse-pointer"></i> <strong>{{ url.click_count }}</strong> clicks</span>
                    {% if url.expires_at %}<span><i class="far fa-clock"></i> Expires: {{ url.expires_at[:10] }}</span>{% endif %}
                </div>
                <div class="url-actions">
                    <button class="btn btn-secondary" onclick="copyToClipboard('{{ url.short_url }}', this)"><i class="far fa-copy"></i> Copy</button>
                    <a href="/stats/{{ url.short_code }}" class="btn btn-primary"><i class="fas fa-chart-line"></i> Stats</a>
                    <a href="/{{ url.short_code }}" target="_blank" class="btn btn-primary"><i class="fas fa-external-link-alt"></i> Visit</a>
                    <button class="btn btn-danger" onclick="deleteUrl('{{ url.short_code }}')"><i class="far fa-trash-alt"></i> Delete</button>
                </div>
            </div>
            {% endfor %}
        </div>
        {% if data.pages > 1 %}
        <div class="pagination">
            {% if data.has_prev %}<a href="/dashboard?page={{ data.current_page - 1 }}"><i class="fas fa-chevron-left"></i> Previous</a>{% endif %}
            {% for page_num in range(1, data.pages + 1) %}
                {% if page_num == data.current_page %}<span class="current">{{ page_num }}</span>{% elif page_num <= 3 or page_num > data.pages - 3 or (page_num >= data.current_page - 1 and page_num <= data.current_page + 1) %}<a href="/dashboard?page={{ page_num }}">{{ page_num }}</a>{% elif page_num == 4 or page_num == data.pages - 3 %}<span>...</span>{% endif %}
            {% endfor %}
            {% if data.has_next %}<a href="/dashboard?page={{ data.current_page + 1 }}">Next <i class="fas fa-chevron-right"></i></a>{% endif %}
        </div>
        {% endif %}
        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon"></div>
            <h3>No URLs Yet</h3>
            <p>You haven't created any short URLs yet. Get started by shortening your first URL!</p>
            <a href="/" class="btn btn-primary"><i class="fas fa-plus"></i> Create Short URL</a>
        </div>
        {% endif %}
    </div>
    <script>
        function copyToClipboard(text, button) { navigator.clipboard.writeText(text).then(() => { const originalHTML = button.innerHTML; button.innerHTML = '<i class="fas fa-check"></i> Copied!'; button.style.background = 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)'; setTimeout(() => { button.innerHTML = originalHTML; button.style.background = ''; }, 2000); }).catch(err => { alert('Failed to copy: ' + err); }); }
        function deleteUrl(shortCode) { if (!confirm('Are you sure you want to delete this URL? This action cannot be undone.')) { return; } fetch(/api/urls/, { method: 'DELETE' }).then(response => response.json()).then(data => { if (data.success) { alert(' URL deleted successfully!'); window.location.reload(); } else { alert('Error: ' + data.error); } }).catch(error => { alert('Error deleting URL: ' + error); }); }
    </script>
</body>
</html>
